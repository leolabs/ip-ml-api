<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>HTML-Testpage</title>
    <script src="api_js_websocket.js" type="text/javascript"></script>
    <script type="text/javascript" defer>
        var myFileList = null;
        var fileInput = null;

        window.onload = function() {
            fileInput = document.getElementById("file_input");
            if (fileInput) {
                fileInput.onchange = function() {
                    myFileList = fileInput.files;
                }
            } else {
                console.warn("Warning: file input not found");
            }
        };

        function getTextFromInputAndSend() {
            let el = document.getElementById("text_input");
            if (el) {
                let val = el.value;
                console.log("calling sendText() with:");
                console.log(val);
                sendText(val);
            }
        }

        function getFileFromInputAndSend() {
            console.log("calling sendFile() with:");
            console.log(myFileList);
            sendText(myFileList);
        }

    </script>
    <style>
        body {
            background: darkgrey;
            color: dimgray;
        }

    </style>
</head>

<body>
    <div class="controls" style="width: 720px; margin: auto;">
        <h1>client test</h1>
        <fieldset>
            <label for="text_input">Text/JSON Input</label>
            <br/>
            <br/>
            <textarea id="text_input" rows="5" cols="80" placeholder="Paste ndjson formatted text here" style="resize: vertical; background: darkgrey; border-color: dimgray;"></textarea>
            <br/>
            <br/>
            <button onclick="getTextFromInputAndSend();" type="submit" style="float: left;">Send text</button>
        </fieldset>

        <br/>
        <br/>

        <fieldset>
            <label for="file_input">Binary/picture Input</label>
            <br/>
            <br/>
            <input id="file_input" type="file">
            <br/>
            <br/>
            <button onclick="getFileFromInputAndSend();" type="submit" style="float: left;">Send file</button>
        </fieldset>

        <br/>
        <br/>

        <p>View browser console for (error) messages</p>

    </div>

</body>

</html>
